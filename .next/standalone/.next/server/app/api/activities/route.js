(()=>{var e={};e.id=39,e.ids=[39],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},46505:(e,t,s)=>{"use strict";s.r(t),s.d(t,{originalPathname:()=>_,patchFetch:()=>D,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>l});var r={};s.r(r),s.d(r,{GET:()=>p,dynamic:()=>c,runtime:()=>u});var i=s(49303),a=s(88716),o=s(60670),n=s(16385);let u="nodejs",c="force-dynamic";async function p(e){let{searchParams:t}=new URL(e.url),s=t.get("start"),r=t.get("end"),i=t.get("assigned_user_id"),a=t.get("status"),o=t.get("doc"),u="SELECT a.*, u.name as profissional, c.nome as company_nome, c.cnpj, c.cpf, c.caepf FROM activities a LEFT JOIN users u ON u.id=a.assigned_user_id LEFT JOIN companies c ON c.id=a.company_id WHERE 1=1",c=[];s&&(u+=" AND DATE(a.start_datetime) >= ?",c.push(s)),r&&(u+=" AND DATE(a.start_datetime) <= ?",c.push(r)),i&&(u+=" AND a.assigned_user_id = ?",c.push(i)),a&&(u+=" AND a.status = ?",c.push(a)),o&&(u+=" AND (c.cnpj=? OR c.cpf=? OR c.caepf=?)",c.push(o,o,o)),u+=" ORDER BY a.start_datetime ASC";let p=await (0,n.V)(),[d]=await p.execute(u,c);await p.end();let m=new Date;return d.forEach(e=>{let t=e.start_datetime instanceof Date?e.start_datetime:new Date(e.start_datetime);"CONCLUIDA"!==e.status&&t<m&&(e.status="EM_ATRASO")}),new Response(JSON.stringify(d),{headers:{"Content-Type":"application/json"}})}let d=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/activities/route",pathname:"/api/activities",filename:"route",bundlePath:"app/api/activities/route"},resolvedPagePath:"C:\\Users\\felipe\\Desktop\\agora\\src\\app\\api\\activities\\route.js",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:v}=d,_="/api/activities/route";function D(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:l})}},49303:(e,t,s)=>{"use strict";e.exports=s(30517)},16385:(e,t,s)=>{"use strict";s.d(t,{V:()=>i});var r=s(69518);async function i(){if(!process.env.DB_HOST||!process.env.DB_USER||!process.env.DB_NAME)throw Error("Database env vars missing (DB_HOST, DB_USER, DB_NAME). Configure on Vercel Project Settings â†’ Environment Variables.");return await r.createConnection({host:process.env.DB_HOST,port:process.env.DB_PORT||3306,user:process.env.DB_USER,password:process.env.DB_PASS,database:process.env.DB_NAME,charset:"utf8mb4"})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,827],()=>s(46505));module.exports=r})();