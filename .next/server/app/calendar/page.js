(()=>{var e={};e.id=329,e.ids=[329],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},58702:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d}),s(13387),s(68295),s(35866);var a=s(23191),n=s(88716),r=s(37922),l=s.n(r),i=s(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,13387)),"C:\\Users\\felipe\\Desktop\\agora\\src\\app\\calendar\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,68295)),"C:\\Users\\felipe\\Desktop\\agora\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\felipe\\Desktop\\agora\\src\\app\\calendar\\page.jsx"],m="/calendar/page",h={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/calendar/page",pathname:"/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},84208:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},41339:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,79404,23))},22985:(e,t,s)=>{Promise.resolve().then(s.bind(s,57013))},57013:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(10326),n=s(17577);function r(e){return e instanceof Date?e:new Date(e)}function l(e){let t=r(e);return!t||isNaN(t)?"":t.toISOString().slice(0,10)}function i(e){let t=r(e);return!t||isNaN(t)?"":t.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}function c(e){if(null==e)return"";let t=String(e).replaceAll('"','""');return/[",\n]/.test(t)?'"'+t+'"':t}function d(){let[e,t]=(0,n.useState)([]),[s,d]=(0,n.useState)([]),[o,m]=(0,n.useState)(""),[h,x]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),[j,g]=(0,n.useState)("WEEK"),[N,f]=(0,n.useState)(new Date),v=(0,n.useMemo)(()=>(function(e){let t=new Date(e),s=t.getDay(),a=new Date(t);return a.setDate(t.getDate()-(s+6)%7),[...Array(7)].map((e,t)=>{let s=new Date(a);return s.setDate(a.getDate()+t),s})})(N),[N]),b=(0,n.useMemo)(()=>(function(e){let t=new Date(e),s=new Date(new Date(t.getFullYear(),t.getMonth(),1)),a=(s.getDay()+6)%7;return s.setDate(s.getDate()-a),[...Array(42)].map((e,t)=>{let a=new Date(s);return a.setDate(s.getDate()+t),a})})(N),[N]),D=(0,n.useMemo)(()=>"WEEK"===j?{start:v[0],end:v[6]}:"MONTH"===j?{start:b[0],end:b[41]}:{start:new Date(N.getFullYear(),N.getMonth(),1),end:new Date(N.getFullYear(),N.getMonth()+1,0)},[j,N,v,b]),y=(0,n.useMemo)(()=>{let e={};for(let t of s){let s=l(t.start_datetime);(e[s]??=[]).push(t)}return e},[s]);return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Calend\xe1rio"}),(0,a.jsxs)("div",{className:"card grid md:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"hdr",children:"Profissional"}),(0,a.jsxs)("select",{className:"select",value:o,onChange:e=>m(e.target.value),children:[a.jsx("option",{value:"",children:"Todos"}),e.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"hdr",children:"Status"}),(0,a.jsxs)("select",{className:"select",value:h,onChange:e=>x(e.target.value),children:[a.jsx("option",{value:"",children:"Todos"}),a.jsx("option",{value:"PENDENTE",children:"Pendente"}),a.jsx("option",{value:"EM_ATRASO",children:"Em atraso"}),a.jsx("option",{value:"CONCLUIDA",children:"Conclu\xedda"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"hdr",children:"CNPJ/CPF/CAEPF"}),a.jsx("input",{className:"input",placeholder:"Documento",value:u,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[a.jsx("button",{className:`btn ${"WEEK"===j?"":"opacity-70"}`,onClick:()=>g("WEEK"),children:"Semana"}),a.jsx("button",{className:`btn ${"MONTH"===j?"":"opacity-70"}`,onClick:()=>g("MONTH"),children:"M\xeas"}),a.jsx("button",{className:`btn ${"LIST"===j?"":"opacity-70"}`,onClick:()=>g("LIST"),children:"Lista"})]}),(0,a.jsxs)("div",{className:"md:col-span-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn",onClick:function(){"WEEK"===j?f(new Date(N.getFullYear(),N.getMonth(),N.getDate()-7)):f(new Date(N.getFullYear(),N.getMonth()-1,1))},children:"◀"}),a.jsx("button",{className:"btn",onClick:function(){f(new Date)},children:"Hoje"}),a.jsx("button",{className:"btn",onClick:function(){"WEEK"===j?f(new Date(N.getFullYear(),N.getMonth(),N.getDate()+7)):f(new Date(N.getFullYear(),N.getMonth()+1,1))},children:"▶"}),a.jsx("input",{className:"input ml-2",type:"date",value:l(N),onChange:e=>f(new Date(e.target.value+"T00:00:00"))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Per\xedodo: ",l(D.start)," → ",l(D.end)]}),a.jsx("button",{className:"btn",onClick:function(){let e=new Blob([[["Data","Hora","Cliente","Profissional","T\xedtulo","Status","Documento"],...s.map(e=>[l(e.start_datetime),i(e.start_datetime),e.company_nome||"",e.profissional||"",e.title||"",e.status||"",e.cnpj||e.cpf||e.caepf||""])].map(e=>e.map(c).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`atividades_${l(D.start)}_${l(D.end)}.csv`,a.click(),URL.revokeObjectURL(t)},children:"Exportar CSV"})]})]})]}),"WEEK"===j&&a.jsx("div",{className:"grid md:grid-cols-7 gap-3",children:v.map((e,t)=>{let s=y[l(e)]||[];return(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"font-semibold",children:e.toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"2-digit"})}),(0,a.jsxs)("ul",{className:"mt-2 space-y-2",children:[s.map(e=>(0,a.jsxs)("li",{className:"border rounded-xl p-2",children:[a.jsx("div",{className:"text-sm font-medium",children:e.title}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[i(e.start_datetime)," • ",e.company_nome||"—"," • ",e.profissional||"—"]}),a.jsx("a",{className:"text-xs text-accent",href:`/activities/${e.id}`,children:"Abrir"})]},e.id)),0===s.length&&a.jsx("li",{className:"text-xs text-gray-400",children:"Sem atividades"})]})]},t)})}),"MONTH"===j&&a.jsx("div",{className:"card",children:(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Seg","Ter","Qua","Qui","Sex","S\xe1b","Dom"].map((e,t)=>a.jsx("div",{className:"hdr p-2 text-center",children:e},t)),b.map((e,t)=>{let s=l(e),n=(y[s]||[]).slice(0,4),r=e.getMonth()!==N.getMonth();return(0,a.jsxs)("div",{className:`border rounded-xl p-2 min-h-[110px] ${r?"bg-gray-50 text-gray-400":""}`,children:[a.jsx("div",{className:"text-xs text-right",children:e.getDate().toString().padStart(2,"0")}),(0,a.jsxs)("ul",{className:"mt-1 space-y-1",children:[n.map(e=>(0,a.jsxs)("li",{className:"text-xs",children:[a.jsx("span",{className:"font-medium",children:i(e.start_datetime)})," — ",a.jsx("a",{className:"underline",href:`/activities/${e.id}`,children:e.title})]},e.id)),0===(y[s]||[]).length&&a.jsx("li",{className:"text-[11px] text-gray-400",children:"Sem atividades"}),(y[s]||[]).length>4&&(0,a.jsxs)("li",{className:"text-[11px] text-blue-600",children:["+ ",(y[s]||[]).length-4," mais"]})]})]},t)})]})}),"LIST"===j&&a.jsx("div",{className:"card overflow-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"text-left",children:[a.jsx("th",{className:"p-2",children:"Data"}),a.jsx("th",{className:"p-2",children:"Hora"}),a.jsx("th",{className:"p-2",children:"Cliente"}),a.jsx("th",{className:"p-2",children:"Profissional"}),a.jsx("th",{className:"p-2",children:"T\xedtulo"}),a.jsx("th",{className:"p-2",children:"Status"}),a.jsx("th",{className:"p-2",children:"Documento"}),a.jsx("th",{className:"p-2",children:"A\xe7\xe3o"})]})}),(0,a.jsxs)("tbody",{children:[[...s].sort((e,t)=>r(e.start_datetime)-r(t.start_datetime)).map(e=>{let t=l(e.start_datetime),s=i(e.start_datetime);return(0,a.jsxs)("tr",{className:"border-t",children:[a.jsx("td",{className:"p-2",children:t}),a.jsx("td",{className:"p-2",children:s}),a.jsx("td",{className:"p-2",children:e.company_nome||"—"}),a.jsx("td",{className:"p-2",children:e.profissional||"—"}),a.jsx("td",{className:"p-2",children:e.title}),a.jsx("td",{className:"p-2",children:e.status}),a.jsx("td",{className:"p-2",children:e.cnpj||e.cpf||e.caepf||"—"}),a.jsx("td",{className:"p-2",children:a.jsx("a",{className:"text-accent underline",href:`/activities/${e.id}`,children:"Abrir"})})]},e.id)}),0===s.length&&a.jsx("tr",{children:a.jsx("td",{className:"p-2 text-gray-500",colSpan:8,children:"Sem atividades no per\xedodo."})})]})]})})]})}},13387:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`C:\Users\felipe\Desktop\agora\src\app\calendar\page.jsx#default`)},68295:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>r});var a=s(19510);s(5023);var n=s(57371);let r={title:"Propostas & Atividades",description:"Controle de propostas, contratos e agenda"};function l({children:e}){return a.jsx("html",{lang:"pt-BR",children:(0,a.jsxs)("body",{children:[a.jsx("nav",{className:"bg-white border-b border-gray-200",children:(0,a.jsxs)("div",{className:"container h-14 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(n.default,{href:"/dashboard",children:"Dashboard"}),a.jsx(n.default,{href:"/calendar",children:"Calend\xe1rio"}),a.jsx(n.default,{href:"/companies",children:"Empresas"}),a.jsx(n.default,{href:"/proposals",children:"Propostas"}),a.jsx(n.default,{href:"/contracts",children:"Contratos"})]}),a.jsx("form",{action:"/api/auth/logout",method:"post",children:a.jsx("button",{className:"text-sm text-red-600",children:"Sair"})})]})}),a.jsx("main",{className:"container py-6",children:e})]})})}},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,707],()=>s(58702));module.exports=a})();