(()=>{var e={};e.id=450,e.ids=[450],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},31022:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>_,requestAsyncStorage:()=>l,routeModule:()=>v,serverHooks:()=>x,staticGenerationAsyncStorage:()=>E});var s={};r.r(s),r.d(s,{POST:()=>d,dynamic:()=>p,runtime:()=>c});var i=r(49303),n=r(88716),a=r(60670),o=r(87070),u=r(16385);let c="nodejs",p="force-dynamic";async function d(e,{params:t}){let r=Number(t.id),{event_type:s,event_time:i,new_datetime:n,performed_by:a,notes:c,evidence_url:p}=await e.json();if(!s||!i)return o.NextResponse.json({error:"event_type e event_time s\xe3o obrigat\xf3rios"},{status:400});let d=await (0,u.V)(),[[v]]=await d.execute("SELECT * FROM activities WHERE id=?",[r]);return v?(await d.execute(`
    INSERT INTO activity_events (activity_id, event_type, event_time, new_datetime, performed_by, notes, evidence_url)
    VALUES (?,?,?,?,?,?,?)
  `,[r,s,i,n||null,a||null,c||null,p||null]),"EXECUTED"===s?await d.execute("UPDATE activities SET status='CONCLUIDA', end_datetime=? WHERE id=?",[i,r]):"RESCHEDULED"===s&&n&&await d.execute("UPDATE activities SET start_datetime=?, status='PENDENTE' WHERE id=?",[n,r]),await d.end(),o.NextResponse.json({ok:!0})):(await d.end(),o.NextResponse.json({error:"Atividade n\xe3o encontrada"},{status:404}))}let v=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/activities/[id]/events/route",pathname:"/api/activities/[id]/events",filename:"route",bundlePath:"app/api/activities/[id]/events/route"},resolvedPagePath:"C:\\Users\\felipe\\Desktop\\agora\\src\\app\\api\\activities\\[id]\\events\\route.js",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:E,serverHooks:x}=v,m="/api/activities/[id]/events/route";function _(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:E})}},16385:(e,t,r)=>{"use strict";r.d(t,{V:()=>i});var s=r(69518);async function i(){if(!process.env.DB_HOST||!process.env.DB_USER||!process.env.DB_NAME)throw Error("Database env vars missing (DB_HOST, DB_USER, DB_NAME). Configure on Vercel Project Settings â†’ Environment Variables.");return await s.createConnection({host:process.env.DB_HOST,port:process.env.DB_PORT||3306,user:process.env.DB_USER,password:process.env.DB_PASS,database:process.env.DB_NAME,charset:"utf8mb4"})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,827,972],()=>r(31022));module.exports=s})();