(()=>{var e={};e.id=913,e.ids=[913],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},93408:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(13252),s(68295),s(35866);var a=s(23191),r=s(88716),n=s(37922),i=s.n(n),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["contracts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,13252)),"C:\\Users\\felipe\\Desktop\\agora\\src\\app\\contracts\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,68295)),"C:\\Users\\felipe\\Desktop\\agora\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\felipe\\Desktop\\agora\\src\\app\\contracts\\page.jsx"],p="/contracts/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/contracts/page",pathname:"/contracts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},84208:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},41339:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,79404,23))},50187:(e,t,s)=>{Promise.resolve().then(s.bind(s,26205))},26205:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(10326),r=s(17577),n=s(79404),i=s.n(n);function o(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[d,c]=(0,r.useState)({company_id:"",start_date:"",end_date:"",monthly_value:"",notes:"",items:[{service_id:"",quantity_proposta:1}]});async function p(){let[e,s,a]=await Promise.all([fetch("/api/companies").then(e=>e.json()),fetch("/api/services").then(e=>e.json()),fetch("/api/contracts").then(e=>e.json())]);n(e),l(s),t(a)}function h(e,t,s){let a=[...d.items];a[e][t]=s,c({...d,items:a})}async function u(e){e.preventDefault(),await fetch("/api/contracts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),c({company_id:"",start_date:"",end_date:"",monthly_value:"",notes:"",items:[{service_id:"",quantity_proposta:1}]}),p()}return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Contratos"}),a.jsx("div",{className:"card",children:(0,a.jsxs)("form",{onSubmit:u,className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-3",children:[(0,a.jsxs)("select",{className:"select",value:d.company_id,onChange:e=>c({...d,company_id:e.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Empresa"}),s.map(e=>a.jsx("option",{value:e.id,children:e.nome},e.id))]}),a.jsx("input",{className:"input",type:"date",value:d.start_date,onChange:e=>c({...d,start_date:e.target.value}),required:!0}),a.jsx("input",{className:"input",type:"date",value:d.end_date,onChange:e=>c({...d,end_date:e.target.value})}),a.jsx("input",{className:"input",placeholder:"Valor mensal (R$)",value:d.monthly_value,onChange:e=>c({...d,monthly_value:e.target.value})})]}),a.jsx("textarea",{className:"textarea",placeholder:"Observa\xe7\xf5es",value:d.notes,onChange:e=>c({...d,notes:e.target.value})}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium",children:"Servi\xe7os"}),d.items.map((e,t)=>(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-2",children:[(0,a.jsxs)("select",{className:"select",value:e.service_id,onChange:e=>h(t,"service_id",e.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Servi\xe7o"}),o.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),a.jsx("input",{className:"input",type:"number",min:"1",value:e.quantity_proposta,onChange:e=>h(t,"quantity_proposta",e.target.value)})]},t)),a.jsx("button",{type:"button",className:"btn",onClick:function(){c({...d,items:[...d.items,{service_id:"",quantity_proposta:1}]})},children:"+ Servi\xe7o"})]}),a.jsx("div",{children:a.jsx("button",{className:"btn",children:"Salvar Contrato"})})]})}),a.jsx("div",{className:"card overflow-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:"ID"}),a.jsx("th",{children:"Empresa"}),a.jsx("th",{children:"In\xedcio"}),a.jsx("th",{children:"T\xe9rmino"}),a.jsx("th",{children:"Valor Mensal"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Planner"})]})}),a.jsx("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[a.jsx("td",{children:e.id}),a.jsx("td",{children:e.company_nome}),a.jsx("td",{children:e.start_date}),a.jsx("td",{children:e.end_date||"—"}),a.jsx("td",{children:e.monthly_value?`R$ ${Number(e.monthly_value).toFixed(2)}`:"—"}),a.jsx("td",{children:e.status}),a.jsx("td",{children:a.jsx(i(),{className:"btn",href:`/contracts/${e.id}/planner`,children:"Abrir"})})]},e.id))})]})})]})}},13252:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`C:\Users\felipe\Desktop\agora\src\app\contracts\page.jsx#default`)},68295:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>n});var a=s(19510);s(5023);var r=s(57371);let n={title:"Propostas & Atividades",description:"Controle de propostas, contratos e agenda"};function i({children:e}){return a.jsx("html",{lang:"pt-BR",children:(0,a.jsxs)("body",{children:[a.jsx("nav",{className:"bg-white border-b border-gray-200",children:(0,a.jsxs)("div",{className:"container h-14 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(r.default,{href:"/dashboard",children:"Dashboard"}),a.jsx(r.default,{href:"/calendar",children:"Calend\xe1rio"}),a.jsx(r.default,{href:"/companies",children:"Empresas"}),a.jsx(r.default,{href:"/proposals",children:"Propostas"}),a.jsx(r.default,{href:"/contracts",children:"Contratos"})]}),a.jsx("form",{action:"/api/auth/logout",method:"post",children:a.jsx("button",{className:"text-sm text-red-600",children:"Sair"})})]})}),a.jsx("main",{className:"container py-6",children:e})]})})}},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,707],()=>s(93408));module.exports=a})();