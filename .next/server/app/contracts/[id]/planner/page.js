(()=>{var e={};e.id=125,e.ids=[125],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11912:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>o}),r(15176),r(68295),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),d=r(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let o=["",{children:["contracts",{children:["[id]",{children:["planner",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,15176)),"C:\\Users\\felipe\\Desktop\\agora\\src\\app\\contracts\\[id]\\planner\\page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,68295)),"C:\\Users\\felipe\\Desktop\\agora\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\felipe\\Desktop\\agora\\src\\app\\contracts\\[id]\\planner\\page.jsx"],p="/contracts/[id]/planner/page",h={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/contracts/[id]/planner/page",pathname:"/contracts/[id]/planner",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},84208:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},41339:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,79404,23))},20490:(e,t,r)=>{Promise.resolve().then(r.bind(r,77068))},77068:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(10326),a=r(17577);function n({params:e}){let t=e.id,[r,n]=(0,a.useState)(null),[i,d]=(0,a.useState)(!1);async function l(){let e=await fetch(`/api/contracts/${t}`);n(await e.json())}let o=(0,a.useMemo)(()=>{if(!r)return[];let e=r.contract.start_date;return[...Array(12)].map((t,r)=>({idx:r+1,label:new Date(function(e,t){let r=new Date(e);return r.setMonth(r.getMonth()+t),r.toISOString().slice(0,10)}(e,r)).toLocaleDateString("pt-BR",{month:"short"})}))},[r]);async function c(e,r,s){d(!0),await fetch(`/api/contracts/${t}/plan`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:e,month_index:r,date:s})}),await l(),d(!1)}return r?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h1",{className:"text-2xl font-semibold",children:["Planner do Contrato #",r.contract.id]}),s.jsx("div",{className:"card",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"hdr",children:"Cliente"}),s.jsx("div",{children:r.company.nome})]}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"hdr",children:"In\xedcio"}),s.jsx("div",{children:r.contract.start_date})]}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"hdr",children:"T\xe9rmino"}),s.jsx("div",{children:r.contract.end_date||"—"})]}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"hdr",children:"Valor mensal"}),s.jsx("div",{children:r.contract.monthly_value?`R$ ${Number(r.contract.monthly_value).toFixed(2)}`:"—"})]})]})}),(0,s.jsxs)("div",{className:"card overflow-auto",children:[(0,s.jsxs)("div",{className:"grid",style:{gridTemplateColumns:`220px 220px 180px repeat(${o.length}, 180px)`},children:[s.jsx("div",{className:"hdr p-2",children:"ITEM"}),s.jsx("div",{className:"hdr p-2",children:"SERVI\xc7OS CONTRATADOS"}),s.jsx("div",{className:"hdr p-2",children:"QUANTIDADE PROPOSTA"}),o.map(e=>(0,s.jsxs)("div",{className:"hdr p-2 text-center",children:[e.label.toUpperCase(),s.jsx("div",{className:"text-[10px] text-gray-400",children:"PREVIS\xc3O / DIAS"})]},e.idx)),r.items.map(e=>(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"border rounded-xl p-2",children:e.item_index}),s.jsx("div",{className:"border rounded-xl p-2",children:e.service_name}),s.jsx("div",{className:"border rounded-xl p-2",children:e.quantity_proposta}),o.map(t=>{let a=r.grid[e.id]&&r.grid[e.id][t.idx]||null,n=a?.date||"",i=a?.days_to_action??null;return(0,s.jsxs)("div",{className:"border rounded-xl p-2",children:[s.jsx("input",{className:"date",type:"date",value:n,onChange:r=>c(e.id,t.idx,r.target.value)}),s.jsx("div",{className:`text-xs mt-1 ${"number"==typeof i&&i<0?"text-red-600":"text-gray-500"}`,children:n?`${i} dia(s)`:"Sem Atividade Lan\xe7ada"})]},t.idx)})]}))]}),i&&s.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Salvando..."})]})]}):s.jsx("div",{children:"Carregando..."})}},15176:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\felipe\Desktop\agora\src\app\contracts\[id]\planner\page.jsx#default`)},68295:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>n});var s=r(19510);r(5023);var a=r(57371);let n={title:"Propostas & Atividades",description:"Controle de propostas, contratos e agenda"};function i({children:e}){return s.jsx("html",{lang:"pt-BR",children:(0,s.jsxs)("body",{children:[s.jsx("nav",{className:"bg-white border-b border-gray-200",children:(0,s.jsxs)("div",{className:"container h-14 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx(a.default,{href:"/dashboard",children:"Dashboard"}),s.jsx(a.default,{href:"/calendar",children:"Calend\xe1rio"}),s.jsx(a.default,{href:"/companies",children:"Empresas"}),s.jsx(a.default,{href:"/proposals",children:"Propostas"}),s.jsx(a.default,{href:"/contracts",children:"Contratos"})]}),s.jsx("form",{action:"/api/auth/logout",method:"post",children:s.jsx("button",{className:"text-sm text-red-600",children:"Sair"})})]})}),s.jsx("main",{className:"container py-6",children:e})]})})}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,707],()=>r(11912));module.exports=s})();